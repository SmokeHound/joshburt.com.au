<!DOCTYPE html>
<!-- Shared Tailwind CSS Configuration and Common Styles -->
<link rel="stylesheet" href="./assets/css/styles.css">
<!-- Ensure proper viewport meta tag is present -->
<script>
    // Verify viewport meta tag exists
    if (!document.querySelector('meta[name="viewport"]')) {
        const viewport = document.createElement('meta');
        viewport.name = 'viewport';
        viewport.content = 'width=device-width, initial-scale=1.0, user-scalable=yes';
        document.head.appendChild(viewport);
    }
</script>
<script>
    // Configuration for dynamic color updates from settings
    function applyDynamicColors() {
        const settingsHead = JSON.parse(localStorage.getItem('siteSettings')) || {};
        // Apply CSS variables for instant color update
        document.documentElement.style.setProperty('--tw-color-primary', settingsHead.primaryColor || '#3b82f6');
        document.documentElement.style.setProperty('--tw-color-secondary', settingsHead.secondaryColor || '#10b981');
        document.documentElement.style.setProperty('--tw-color-accent', settingsHead.accentColor || '#8b5cf6');
    }
    applyDynamicColors();
</script>
<style>
    body {
        transition: background-color 0.3s, color 0.3s;
    }
    .dark {
        background-color: #1f2937;
        color: #f9fafb;
    }
    .light {
        background-color: #f9fafb;
        color: #1f2937;
    }
    
    /* Enhanced card styling with proper dark/light mode support */
    .card {
        transition: transform 0.2s, box-shadow 0.2s, background-color 0.3s;
        min-height: 120px;
    }
    
    .card:hover, .card:focus-within {
        transform: translateY(-4px);
        box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
    }
    
    .dark .card:hover, .dark .card:focus-within {
        box-shadow: 0 8px 15px rgba(0, 0, 0, 0.3);
    }
    
    /* Widget background variations for better separation */
    .widget-primary {
        background-color: #f8fafc;
    }
    .dark .widget-primary {
        background-color: #374151;
    }
    
    .widget-secondary {
        background-color: #f1f5f9;
    }
    .dark .widget-secondary {
        background-color: #4b5563;
    }
    
    .widget-accent {
        background-color: #fefbff;
    }
    .dark .widget-accent {
        background-color: #6b7280;
    }
    
    /* Enhanced focus states for accessibility */
    .focus-visible, [tabindex]:focus-visible, button:focus-visible, a:focus-visible, input:focus-visible, select:focus-visible, textarea:focus-visible {
        outline: 2px solid #3b82f6;
        outline-offset: 2px;
        box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1);
    }
    
    .dark .focus-visible, .dark [tabindex]:focus-visible, .dark button:focus-visible, .dark a:focus-visible, .dark input:focus-visible, .dark select:focus-visible, .dark textarea:focus-visible {
        outline-color: #60a5fa;
        box-shadow: 0 0 0 4px rgba(96, 165, 250, 0.2);
    }
    
    /* Toast notifications with high z-index */
    .toast {
        z-index: 9999;
        position: fixed;
    }
    
    /* Modal overlay */
    .modal-overlay {
        z-index: 9990;
    }
    
    /* Loading states */
    .loading-skeleton {
        background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
        background-size: 200% 100%;
        animation: loading 1.5s infinite;
    }
    
    .dark .loading-skeleton {
        background: linear-gradient(90deg, #374151 25%, #4b5563 50%, #374151 75%);
        background-size: 200% 100%;
    }
    
    @keyframes loading {
        0% { background-position: 200% 0; }
        100% { background-position: -200% 0; }
    }
    
    /* Mobile sidebar styles - Unified for all pages */
    @media (max-width: 768px) {
        .sidebar {
            transform: translateX(-100%);
            transition: transform 0.3s ease-in-out;
            z-index: 40;
            background-color: #374151;
        }
        .sidebar.open {
            transform: translateX(0);
        }
        .sidebar-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 30;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease-in-out;
        }
        .sidebar-backdrop.show {
            opacity: 1;
            pointer-events: auto;
        }
        body.sidebar-open {
            overflow: hidden;
        }
        
        /* Enhanced touch targets for mobile */
        button, input, select, textarea {
            min-height: 44px;
        }
        
        /* Mobile-specific content adjustments */
        main {
            margin-left: 0;
        }
        
        /* Oil ordering system mobile adjustments */
        .lg\:col-span-2 {
            grid-column: span 1;
        }
        .lg\:col-span-1 {
            grid-column: span 1;
        }
    }
    
    /* Tablet optimizations - Enhanced for better tablet experience */
    @media (min-width: 768px) and (max-width: 1023px) {
        .sidebar {
            width: 200px;
        }
        main {
            margin-left: 200px;
        }
        
        /* Tablet grid density improvements */
        .grid-cols-1.sm\:grid-cols-2.lg\:grid-cols-3 {
            grid-template-columns: repeat(2, minmax(0, 1fr));
        }
        
        /* Better card spacing for tablets */
        .card {
            min-height: 120px;
        }
    }
    
    /* Large mobile/small tablet specific */
    @media (min-width: 480px) and (max-width: 767px) {
        .grid-cols-1 {
            grid-template-columns: repeat(2, minmax(0, 1fr));
        }
    }
    
    /* Wide desktop optimizations */
    @media (min-width: 1200px) {
        .sidebar {
            width: 280px;
        }
        main {
            margin-left: 280px;
        }
        
        /* Better use of screen real estate */
        .lg\:grid-cols-3 {
            grid-template-columns: repeat(4, minmax(0, 1fr));
        }
    }
    
    .card {
        transition: transform 0.2s, box-shadow 0.2s;
    }
    .card:hover {
        transform: translateY(-4px);
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    
    /* Responsive image handling */
    img {
        max-width: 100%;
        height: auto;
    }
    
    /* Progressive image loading */
    img[data-src] {
        opacity: 0;
        transition: opacity 0.3s;
    }
    
    img[data-src].loaded {
        opacity: 1;
    }
    
    /* Reduced motion support */
    @media (prefers-reduced-motion: reduce) {
        *, *::before, *::after {
            animation-duration: 0.01ms !important;
            animation-iteration-count: 1 !important;
            transition-duration: 0.01ms !important;
        }
        
        .card {
            transition: none;
        }
        
        .card:hover {
            transform: none;
        }
    }
</style>