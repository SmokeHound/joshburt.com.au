<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <!-- PWA Configuration -->
    <link rel="manifest" href="./manifest.json">
    <!-- Theme color meta removed for Firefox/Opera compatibility -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-status-bar-style" content="default">
    <meta name="mobile-web-app-title" content="JoshBurt.com.au">
    <link rel="apple-touch-icon" href="./assets/images/logo-placeholder.svg">
    
    <link rel="stylesheet" href="./assets/css/styles.css">

        <!-- Load shared config and theme system -->
        <script>
            fetch('shared-config.html').then(r => r.text()).then(html => {
                const temp = document.createElement('div');
                temp.innerHTML = html;
                Array.from(temp.children).forEach(child => {
                    if (child.tagName === 'LINK' || child.tagName === 'STYLE' || child.tagName === 'SCRIPT') {
                        document.head.appendChild(child.cloneNode(true));
                    }
                });
            });
            fetch('shared-theme.html').then(r => r.text()).then(html => {
                const temp = document.createElement('div');
                temp.innerHTML = html;
                Array.from(temp.children).forEach(child => {
                    if (child.tagName === 'SCRIPT') {
                        document.head.appendChild(child.cloneNode(true));
                    }
                });
            });
        </script>
    <script>
        // Configuration for dynamic color updates from settings
        function applyDynamicColors() {
            const settingsHead = JSON.parse(localStorage.getItem('siteSettings')) || {};
            // Apply CSS variables for instant color update
            document.documentElement.style.setProperty('--tw-color-primary', settingsHead.primaryColor || '#3b82f6');
            document.documentElement.style.setProperty('--tw-color-secondary', settingsHead.secondaryColor || '#10b981');
            document.documentElement.style.setProperty('--tw-color-accent', settingsHead.accentColor || '#8b5cf6');
        }
        applyDynamicColors();
        // Service Worker Registration for PWA
        if ("serviceWorker" in navigator) {
            window.addEventListener("load", () => {
                navigator.serviceWorker.register("./sw.js")
                    .then(registration => {
                        console.log("SW registered: ", registration);
                    })
                    .catch(registrationError => {
                        console.log("SW registration failed: ", registrationError);
                    });
            });
        }
    </script>
    <style>
        body {
            transition: background-color 0.3s, color 0.3s;
        }
        .dark {
            background-color: #1f2937;
            color: #f9fafb;
        }
        .light {
            background-color: #f9fafb;
            color: #1f2937;
        }
        .sidebar {
            transition: transform 0.3s ease-in-out;
        }
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
            }
            .sidebar.open {
                    body {
                        transition: background-color 0.3s, color 0.3s;
                        font-family: 'Inter', 'system-ui', '-apple-system', sans-serif;
                        background-color: #0a0a0a;
                        color: #ffffff;
                    }
                    .dark {
                        background-color: #0a0a0a;
                        color: #ffffff;
                    }
                    .light {
                        background-color: #f9fafb;
                        color: #1f2937;
                    }
                    .sidebar {
                        width: 16rem;
                        height: 100vh;
                        position: fixed;
                        top: 0;
                        left: 0;
                        overflow-y: auto;
                        transition: background-color 0.3s;
                        z-index: 100;
                        background-color: #111111;
                        border-right: 1px solid #00d4ff20;
                    }
                    main {
                        margin-left: 16rem;
                        min-height: 100vh;
                        background-color: #0a0a0a;
                    }
                    @media (max-width: 768px) {
                        .sidebar {
                            transform: translateX(-100%);
                            transition: transform 0.3s ease-in-out;
                        }
                        .sidebar.open {
                            transform: translateX(0);
                        }
                        main {
                            margin-left: 0;
                        }
                    }
                    .admin-item {
                        transition: all 0.2s ease;
                        background-color: #111111;
                        border: 1px solid #333333;
                    }
                    .admin-item:hover {
                        background-color: #181818;
                        border-color: #00d4ff;
                        box-shadow: 0 4px 20px rgba(0, 212, 255, 0.2);
                    }
                    .sr-only {
                        position: absolute;
                        width: 1px;
                        height: 1px;
                        padding: 0;
                        margin: -1px;
                        overflow: hidden;
                        clip: rect(0, 0, 0, 0);
                        white-space: nowrap;
                        border: 0;
                    }
                    .focus\:not-sr-only:focus {
                        position: static;
                        width: auto;
                        height: auto;
                        padding: 0.5rem;
                        margin: 0;
                        overflow: visible;
                        clip: auto;
                        white-space: normal;
                    }
                    @media print {
                        .sidebar, .no-print { display: none !important; }
                        main { margin-left: 0 !important; }
                        body { background: white !important; color: black !important; }
                    }

                    /* Neon button styles */
                    .btn-neon-blue {
                        background: linear-gradient(45deg, #00d4ff, #0099cc);
                        border: 1px solid #00d4ff;
                        box-shadow: 0 0 10px rgba(0, 212, 255, 0.3);
                        color: #000000;
                        font-weight: 600;
                    }
                    .btn-neon-blue:hover {
                        box-shadow: 0 0 20px rgba(0, 212, 255, 0.6);
                        background: linear-gradient(45deg, #00eeff, #00b8e6);
                    }
                    .btn-neon-green {
                        background: linear-gradient(45deg, #00ff88, #00cc66);
                        border: 1px solid #00ff88;
                        box-shadow: 0 0 10px rgba(0, 255, 136, 0.3);
                        color: #000000;
                        font-weight: 600;
                    }
                    .btn-neon-green:hover {
                        box-shadow: 0 0 20px rgba(0, 255, 136, 0.6);
                        background: linear-gradient(45deg, #00ff99, #00dd77);
                    }

                    /* Navigation link styling */
                    .nav-link {
                        color: #cccccc;
                        transition: all 0.3s ease;
                    }
                    .nav-link:hover {
                        color: #00d4ff;
                        text-shadow: 0 0 8px rgba(0, 212, 255, 0.6);
                    }
                    .nav-link.active {
                        color: #00d4ff;
                        background-color: #00d4ff20;
                        border-left: 3px solid #00d4ff;
                    }

                    /* Neon card styles */
                    .widget-primary {
                        background: linear-gradient(135deg, #00d4ff 0%, #0099cc 100%);
                        border: 2px solid #00d4ff;
                        box-shadow: 0 0 24px 0 rgba(0,212,255,0.25), 0 2px 8px 0 rgba(0,0,0,0.12);
                        color: #000;
                    }
                    .widget-secondary {
                        background: linear-gradient(135deg, #00ff88 0%, #00cc66 100%);
                        border: 2px solid #00ff88;
                        box-shadow: 0 0 24px 0 rgba(0,255,136,0.25), 0 2px 8px 0 rgba(0,0,0,0.12);
                        color: #000;
                    }
                    .widget-accent {
                        background: linear-gradient(135deg, #8b5cf6 0%, #00d4ff 100%);
                        border: 2px solid #8b5cf6;
                        box-shadow: 0 0 24px 0 rgba(139,92,246,0.25), 0 2px 8px 0 rgba(0,0,0,0.12);
                        color: #fff;
                    }
                    .widget-warning {
                        background: linear-gradient(135deg, #ffe066 0%, #ff8800 100%);
                        border: 2px solid #ffe066;
                        box-shadow: 0 0 24px 0 rgba(255,224,102,0.25), 0 2px 8px 0 rgba(0,0,0,0.12);
                        color: #000;
                    }
                </style>
            </head>
            <body class="dark">
    <!-- Mobile Menu Toggle -->
    <button id="menu-toggle" class="md:hidden fixed top-4 left-4 z-50 p-2 bg-primary text-white rounded-md focus:outline-none focus:ring-2 focus:ring-secondary" aria-label="Toggle sidebar" aria-expanded="false">â˜°</button>
    <div id="sidebar-backdrop" class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden"></div>
    <div class="flex min-h-screen">
        <!-- Sidebar -->
        <aside id="sidebar" class="w-64 fixed top-0 left-0 h-full bg-gray-800 text-white p-4 flex flex-col shadow md:static md:translate-x-0 transform transition-transform duration-300">
            <h1 class="text-2xl font-bold mb-6">Josh's App</h1>
            <nav aria-label="Main navigation">
                <ul class="space-y-2">
                    <li><a class="block p-2 rounded hover:bg-primary" href="index.html">Home</a></li>
                    <li><a class="block p-2 rounded bg-primary" aria-current="page" href="administration.html">Administration</a></li>
                    <li><a class="block p-2 rounded hover:bg-primary" href="users.html">User Management</a></li>
                    <li><a class="block p-2 rounded hover:bg-primary" href="analytics.html">Analytics</a></li>
                    <li><a class="block p-2 rounded hover:bg-primary" href="settings.html">Settings</a></li>
                    <li><a class="block p-2 rounded hover:bg-primary" href="oil.html">Oil Orders</a></li>
                    <li><a class="block p-2 rounded hover:bg-primary" href="consumables.html">Consumables Orders</a></li>
                    <li><a class="block p-2 rounded hover:bg-red-600" href="login.html">Logout</a></li>
                </ul>
            </nav>
            <button id="theme-toggle" class="w-full mt-4 p-2 rounded bg-primary text-white hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 transition-colors duration-200">Toggle Light/Dark</button>
            <div class="mt-auto pt-4 text-xs text-gray-300">v1 Settings</div>
        </aside>
        <!-- Main Content -->
        <main class="flex-1 p-4 md:p-6 ml-64 md:ml-0">
            <section>
                <!-- Admin Cards Grid -->
                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6" role="region" aria-label="Admin functions">
                    <div class="card widget-primary p-6 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2" tabindex="0" role="article">
                        <h3 class="text-xl font-semibold mb-3 text-gray-900 dark:text-gray-100">User Management</h3>
                        <p class="mb-4 text-gray-600 dark:text-gray-300">Manage user accounts and permissions.</p>
                        <a href="users.html" class="w-full block p-3 bg-primary text-white rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 text-center transition-colors duration-200">Manage Users</a>
                    </div>
                    <div class="card widget-secondary p-6 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2" tabindex="0" role="article">
                        <h3 class="text-xl font-semibold mb-3 text-gray-900 dark:text-gray-100">Analytics</h3>
                        <p class="mb-4 text-gray-600 dark:text-gray-300">View site statistics and user engagement.</p>
                        <a href="analytics.html" class="w-full block p-3 bg-secondary text-white rounded-lg hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-secondary focus:ring-offset-2 text-center transition-colors duration-200">View Analytics</a>
                    </div>
                    <div class="card widget-accent p-6 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2" tabindex="0" role="article">
                        <h3 class="text-xl font-semibold mb-3 text-gray-900 dark:text-gray-100">Site Settings</h3>
                        <p class="mb-4 text-gray-600 dark:text-gray-300">Configure website settings and preferences.</p>
                        <a href="settings.html" class="w-full block p-3 bg-accent text-white rounded-lg hover:bg-purple-600 focus:outline-none focus:ring-2 focus:ring-accent focus:ring-offset-2 text-center transition-colors duration-200">Site Settings</a>
                    </div>
                    <div class="card widget-primary p-6 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2" tabindex="0" role="article">
                        <h3 class="text-xl font-semibold mb-3 text-gray-900 dark:text-gray-100">Oil Management</h3>
                        <p class="mb-4 text-gray-600 dark:text-gray-300">Manage oil products, add descriptions and images.</p>
                        <a href="oil-products-management.html" class="w-full block p-3 bg-primary text-white rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 text-center transition-colors duration-200">Manage Products</a>
                    </div>
                    <div class="card widget-primary p-6 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2" tabindex="0" role="article">
                        <h3 class="text-xl font-semibold mb-3 text-gray-900 dark:text-gray-100">Consumables Management</h3>
                        <p class="mb-4 text-gray-600 dark:text-gray-300">Manage consumable products, add descriptions and images.</p>
                        <a href="consumables-mgmt.html" class="w-full block p-3 bg-primary text-white rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 text-center transition-colors duration-200">Manage Products</a>
                    </div>
                    <div class="card widget-warning p-6 rounded-lg shadow-md focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2" tabindex="0" role="article">
                        <h3 class="text-xl font-semibold mb-3 text-gray-900 dark:text-gray-100">Orders Review</h3>
                        <p class="mb-4 text-gray-600 dark:text-gray-300">Review and manage workshop orders.</p>
                        <a href="orders-review.html" class="w-full block p-3 bg-yellow-500 text-white rounded-lg hover:bg-yellow-600 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:ring-offset-2 text-center transition-colors duration-200">Go to Orders Review</a>
                    </div>
                </div>
            </section>
        </main>
    </div>
                    <script>
                        // Load and apply site settings
                        function loadAndApplySettings() {
                            const settings = JSON.parse(localStorage.getItem('siteSettings')) || {};
                            // Apply site title if set
                            if (settings['site-title']) {
                                const brandingElements = document.querySelectorAll('h1');
                                brandingElements.forEach(el => el.textContent = settings['site-title']);
                            }
                        }
                        loadAndApplySettings();
                        // Theme toggle
                        document.getElementById('theme-toggle').addEventListener('click', function() {
                            const body = document.body;
                            if (body.classList.contains('dark')) {
                                body.classList.remove('dark');
                                body.classList.add('light');
                                this.textContent = 'Toggle Dark Mode';
                            } else {
                                body.classList.remove('light');
                                body.classList.add('dark');
                                this.textContent = 'Toggle Light Mode';
                            }
                        });
                        // Sidebar toggle for mobile
                        const menuToggle = document.getElementById('menu-toggle');
                        const sidebar = document.getElementById('sidebar');
                        const sidebarBackdrop = document.getElementById('sidebar-backdrop');
                        menuToggle.addEventListener('click', function() {
                            sidebar.classList.toggle('open');
                            sidebarBackdrop.classList.toggle('open');
                            this.setAttribute('aria-expanded', sidebar.classList.contains('open'));
                        });
                        sidebarBackdrop.addEventListener('click', function() {
                            sidebar.classList.remove('open');
                            sidebarBackdrop.classList.remove('open');
                            menuToggle.setAttribute('aria-expanded', 'false');
                        });
                        // Toast notification helper
                        function showToast(message) {
                            const toast = document.getElementById('toast');
                            toast.textContent = message;
                            toast.classList.remove('hidden');
                            setTimeout(() => toast.classList.add('hidden'), 3000);
                        }
                    </script>
</body>
</html>