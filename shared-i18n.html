<!DOCTYPE html>
<!-- Multi-language Support Framework -->
<script>
(function() {
    // Language configuration
    const languages = {
        en: {
            name: 'English',
            flag: '🇺🇸',
            translations: {
                'nav.home': 'Home',
                'nav.admin': 'Admin',
                'nav.users': 'User Management',
                'nav.analytics': 'Analytics',
                'nav.settings': 'Settings',
                'nav.oil': 'Oil Orders',
                'nav.consumables': 'Consumables Orders',
                'nav.logout': 'Logout',
                'theme.toggle.dark': 'Toggle Light Mode',
                'theme.toggle.light': 'Toggle Dark Mode',
                'app.title': "Josh's App",
                'notifications.title': 'Notifications',
                'notifications.empty': 'No new notifications',
                'dashboard.welcome': 'Welcome to Dashboard',
                'dashboard.admin': 'Admin Dashboard',
                'dashboard.user': 'User Dashboard',
                'language.label': 'Language',
                'schedule.title': 'Theme Schedule',
                'schedule.auto': 'Auto Dark Mode',
                'schedule.enabled': 'Enabled',
                'schedule.start': 'Dark mode starts at',
                'schedule.end': 'Light mode starts at'
            }
        },
        es: {
            name: 'Español',
            flag: '🇪🇸',
            translations: {
                'nav.home': 'Inicio',
                'nav.admin': 'Administración',
                'nav.users': 'Gestión de Usuarios',
                'nav.analytics': 'Analíticas',
                'nav.settings': 'Configuración',
                'nav.oil': 'Pedidos de Aceite',
                'nav.consumables': 'Pedidos de Consumibles',
                'nav.logout': 'Cerrar Sesión',
                'theme.toggle.dark': 'Cambiar a Modo Claro',
                'theme.toggle.light': 'Cambiar a Modo Oscuro',
                'app.title': 'Aplicación de Josh',
                'notifications.title': 'Notificaciones',
                'notifications.empty': 'No hay notificaciones nuevas',
                'dashboard.welcome': 'Bienvenido al Panel',
                'dashboard.admin': 'Panel de Administración',
                'dashboard.user': 'Panel de Usuario',
                'language.label': 'Idioma',
                'schedule.title': 'Programación de Tema',
                'schedule.auto': 'Modo Oscuro Automático',
                'schedule.enabled': 'Activado',
                'schedule.start': 'Modo oscuro inicia a las',
                'schedule.end': 'Modo claro inicia a las'
            }
        }
    };

    // Current language state
    let currentLanguage = localStorage.getItem('siteLanguage') || 'en';

    // Translation function
    window.t = function(key, fallback = key) {
        return languages[currentLanguage]?.translations[key] || fallback;
    };

    // Language switching function
    window.switchLanguage = function(langCode) {
        if (languages[langCode]) {
            currentLanguage = langCode;
            localStorage.setItem('siteLanguage', langCode);
            updatePageTranslations();
            
            // Update language selector if it exists
            const languageSelector = document.getElementById('language-selector');
            if (languageSelector) {
                languageSelector.value = langCode;
            }
            
            // Show notification
            if (window.showNotification) {
                window.showNotification(
                    `Language changed to ${languages[langCode].name}`, 
                    'success'
                );
            }
        }
    };

    // Update all translatable elements on the page
    function updatePageTranslations() {
        document.querySelectorAll('[data-i18n]').forEach(element => {
            const key = element.getAttribute('data-i18n');
            const translation = window.t(key);
            
            if (element.tagName === 'INPUT' && element.type === 'submit') {
                element.value = translation;
            } else if (element.tagName === 'INPUT' && element.placeholder !== undefined) {
                element.placeholder = translation;
            } else {
                element.textContent = translation;
            }
        });
        
        // Update page title if it has translation
        const titleElement = document.querySelector('title[data-i18n]');
        if (titleElement) {
            const key = titleElement.getAttribute('data-i18n');
            document.title = window.t(key);
        }
    }

    // Get available languages for selector
    window.getLanguages = function() {
        return languages;
    };

    // Get current language
    window.getCurrentLanguage = function() {
        return currentLanguage;
    };

    // Initialize language system
    function initLanguageSystem() {
        // Update translations on page load
        updatePageTranslations();
        
        // Set up language selector if it exists
        const languageSelector = document.getElementById('language-selector');
        if (languageSelector) {
            // Populate language options
            languageSelector.innerHTML = '';
            Object.entries(languages).forEach(([code, lang]) => {
                const option = document.createElement('option');
                option.value = code;
                option.textContent = `${lang.flag} ${lang.name}`;
                option.selected = code === currentLanguage;
                languageSelector.appendChild(option);
            });
            
            // Handle language change
            languageSelector.addEventListener('change', (e) => {
                window.switchLanguage(e.target.value);
            });
        }
    }

    // Initialize when DOM is ready
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initLanguageSystem);
    } else {
        initLanguageSystem();
    }
})();
</script>